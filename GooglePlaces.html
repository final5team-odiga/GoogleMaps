<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps Keyword Path Drawing</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
    <style>
      #map {
        height: 90vh;
        width: 100%;
      }
      #search-box {
        margin: 10px;
        padding: 10px;
        width: 300px;
      }
      #log {
        margin: 10px;
        font-family: monospace;
        white-space: pre-line;
      }
    </style>
  </head>
  <body>
    <input id="search-box" type="text" placeholder="ì¥ì†Œ ì…ë ¥" />
    <div id="log"></div>
    <div id="map"></div>

    <script>
      let map;
      let markers = [];
      let pathCoordinates = [];
      let polyline = null;

      function initMap() {
        const center = { lat: 51.5074, lng: -0.1278 }; // ëŸ°ë˜

        map = new google.maps.Map(document.getElementById("map"), {
          center: center,
          zoom: 7,
        });

        const input = document.getElementById("search-box");

        input.addEventListener("change", () => {
          const keyword = input.value;
          if (keyword.trim() !== "") {
            searchPlace(keyword);
          }
        });
      }

      function searchPlace(keyword) {
        const service = new google.maps.places.PlacesService(map);
        const request = {
          query: keyword,
          fields: ["name", "geometry"],
        };

        service.findPlaceFromQuery(request, (results, status) => {
          if (
            status === google.maps.places.PlacesServiceStatus.OK &&
            results[0]
          ) {
            const place = results[0];
            const loc = place.geometry.location;
            const latLng = { lat: loc.lat(), lng: loc.lng() };

            // ë§ˆì»¤ ì¶”ê°€
            const marker = new google.maps.Marker({
              position: latLng,
              map: map,
              title: place.name,
            });
            markers.push(marker);

            // ë§µ ì¤‘ì‹¬ ì´ë™
            map.setCenter(latLng);

            // ë¡œê·¸ì— í…ìŠ¤íŠ¸ ì¶œë ¥
            const logDiv = document.getElementById("log");
            logDiv.innerText += `ğŸ“ ${place.name}\nìœ„ë„: ${latLng.lat}, ê²½ë„: ${latLng.lng}\n\n`;

            // ì¢Œí‘œ ì¶”ê°€ í›„ ì„  ê·¸ë¦¬ê¸°
            pathCoordinates.push(latLng);
            drawPath();
          } else {
            alert("ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.");
          }
        });
      }

      function drawPath() {
        // ì´ì „ ì„  ì œê±°
        if (polyline) {
          polyline.setMap(null);
        }

        // ìƒˆ ì„  ê·¸ë¦¬ê¸°
        polyline = new google.maps.Polyline({
          path: pathCoordinates,
          geodesic: true,
          strokeColor: "#FF0000",
          strokeOpacity: 1.0,
          strokeWeight: 3,
        });

        polyline.setMap(map);
      }

      window.onload = initMap;
    </script>
  </body>
</html>
